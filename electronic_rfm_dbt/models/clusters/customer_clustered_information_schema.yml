version: 2

models:
  - name: customer_clustered_information
    description: >
      This model enriches the customer clustering results with RFM metrics and descriptive
      segment labels. It joins customer_clusters (cluster assignments) with rfm_df (RFM features),
      and maps each cluster ID to a human-readable segment and description.
    columns:
      - name: customer_id
        description: Unique identifier for each customer.
        tests:
          - not_null
          - unique

      - name: cluster
        description: Numeric cluster ID assigned by the KMeans model.
        tests:
          - not_null
          - accepted_values:
              values: [0, 1, 2]

      - name: customer_segment
        description: Human-readable label for the cluster (e.g., High Value Loyalists).
        tests:
          - not_null

      - name: segment_description
        description: Text description of the customer segment.
        tests:
          - not_null

      - name: recency_days
        description: Number of days since the customer's most recent purchase.

      - name: frequency
        description: Total number of purchases made by the customer.

      - name: monetary
        description: Total spending (in currency units) by the customer.

      - name: total_revenue
        description: Total revenue generated by the customer across all purchases.

      - name: basket_size
        description: Average number of items per order.

      - name: tenure_days
        description: Number of days since the customerâ€™s first purchase.

      - name: product_diversity
        description: Number of unique product types purchased by the customer.

      - name: avg_rating
        description: Average product rating given by the customer.

      - name: recency_score
        description: Score assigned to recency behavior for RFM analysis.

      - name: frequency_score
        description: Score assigned to frequency behavior for RFM analysis.

      - name: monetary_score
        description: Score assigned to monetary behavior for RFM analysis.

      - name: rfm_total_score
        description: Combined RFM score (recency + frequency + monetary).

      - name: recency_bucket
        description: Bucketed recency category (e.g., High, Medium, Low).

      - name: freq_bucket
        description: Bucketed frequency category (e.g., High, Medium, Low).

      - name: loyalty_member
        description: Boolean flag indicating if the customer is a loyalty program member.

      - name: is_churned
        description: Boolean flag indicating if the customer is flagged as churned.